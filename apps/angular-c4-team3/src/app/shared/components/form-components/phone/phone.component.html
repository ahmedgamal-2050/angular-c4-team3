<div class="flex flex-col gap-[0.375rem] w-full">
  @if (label()) {
    <app-label
      [text]="label()"
      [for]="id()"
      [disabled]="disabled()"
      [error]="!!errorMessages()?.length"
    />
  }

  <div class="relative flex items-stretch">
    <p-select
      [options]="countries()"
      [ngModel]="selectedCountry()"
      (ngModelChange)="selectedCountry.set($any($event))"
      optionLabel="name"
      [filter]="true"
      filterBy="name"
      [disabled]="disabled()"
      [class]="dropdownClass()"
      placeholder="Select"
      [pt]="pt()"
    >
      <ng-template pTemplate="selectedItem" let-country>
        <div class="flex items-center gap-2">
          <img
            [src]="country.flag"
            [alt]="country.name"
            class="w-5 h-auto rounded-sm border border-zinc-200"
          />
          <span class="text-sm font-medium text-zinc-700 dark:text-zinc-200"
            >{{ country.code }} ({{ country.phone }})</span
          >
        </div>
      </ng-template>
      <ng-template pTemplate="item" let-country>
        <div class="flex items-center gap-2">
          <img
            [src]="country.flag"
            [alt]="country.name"
            class="w-5 h-auto rounded-sm border border-zinc-200"
          />
          <span class="text-sm text-zinc-700 dark:text-zinc-200"
            >{{ country.name }} ({{ country.phone }})</span
          >
        </div>
      </ng-template>
    </p-select>

    <input
      pInputText
      type="tel"
      [id]="id()"
      [name]="name()"
      [placeholder]="placeholder()"
      [disabled]="disabled()"
      [formControlName]="fieldControlName()"
      [class]="inputClass()"
      pKeyFilter="num"
      class="flex-1 !rounded-l-none"
    />
  </div>

  @if (errorMessages()?.length) {
    <p class="text-red-500 text-xs font-normal">{{ errorMessages()?.[0] }}</p>
  }
</div>
